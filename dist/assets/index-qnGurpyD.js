import{z as y,r as t,c as w,s as I,i as L,a as R,j as s,F as E,A as T,B as $,O as b}from"./index-aB-pfHqH.js";import{M as C,I as z,S as A,a as P,E as _,b as N,c as B,d as F}from"./styledComponents-ZhhTSSiX.js";import{T as M}from"./Title-il1DVEMI.js";function q(){const{id:f}=y(),[n,h]=t.useState(""),[a,m]=t.useState(),[c,k]=t.useState(),[i,l]=t.useState(),[v,S]=t.useState(!1),o=w(I),u=t.useRef(),x=t.useRef(),g=L(),d=t.useCallback(async(e,r)=>{if(e)try{const j={headers:{Authorization:`bearer ${r}`}},p=await R.get(`/api/actors/search?search=${e}`,j);p.data.results.length<1?l("Nothing found"):l(""),k(p.data.results)}catch{l("Nothing found")}},[]);return t.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),t.useEffect(()=>{const e=setTimeout(()=>S(!0),1e3);return()=>clearTimeout(e)},[]),t.useEffect(()=>{a&&setTimeout(()=>x.current.focus(),0)},[a,h]),t.useEffect(()=>{function e(r){u.current&&!u.current.contains(r.target)&&m(!1)}return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]),t.useEffect(()=>{o||g(-1)},[o,g]),t.useEffect(()=>{function e(r){n&&a&&r.key==="Enter"&&d(n,o.token)}return document.addEventListener("keypress",e),()=>document.removeEventListener("keypress",e)},[a,o.token,n,d]),s.jsxs(C,{$loaded:v,children:[s.jsx(M,{text:"people profile"}),!f&&s.jsxs(z,{ref:u,children:[s.jsx(A,{onClick:()=>m(!0),children:s.jsx(E,{icon:T,color:"gold",style:{fontSize:"20px",zIndex:3}})}),s.jsx(P,{id:"search",name:"search",type:"text","aria-label":"find a person",ref:x,$active:a,value:n,onChange:e=>h(e.target.value)}),s.jsx(_,{$active:a,disabled:(n==null?void 0:n.length)<1,onClick:()=>{n&&d(n,o.token)},children:s.jsx(E,{icon:$,color:"gold",style:{fontSize:"20px"}})})]}),(i==null?void 0:i.length)>0&&s.jsx(N,{children:i}),!f&&(c==null?void 0:c.length)>0&&s.jsx(B,{children:c.map(e=>s.jsxs(F,{to:`/detailed-person/${e.id}`,children:[e.name," ",e.known_for_department?`(${e.known_for_department})`:null]},e.id))}),s.jsx(b,{})]})}export{q as default};
