import{z as y,r as t,c as I,s as L,i as R,a as $,j as s,F as k,A as C,B as T,O as b}from"./index-28mlnusY.js";import{M as w,I as z,S as A,a as P,E as _,b as N,c as B,d as F}from"./styledComponents-xOj1KFqf.js";import{T as M}from"./Title-E4W34BXo.js";function q(){const{id:f}=y(),[n,h]=t.useState(""),[a,m]=t.useState(),[c,E]=t.useState(),[i,l]=t.useState(),[S,j]=t.useState(!1),r=I(L),u=t.useRef(),x=t.useRef(),g=R(),d=t.useCallback(async(e,o)=>{if(e)try{const v={headers:{Authorization:`bearer ${o}`}},p=await $.get(`/api/actors/search?search=${e}`,v);p.data.results.length<1?l("Nothing found"):l(""),E(p.data.results)}catch{l("Nothing found")}},[]);return t.useEffect(()=>{const e=setTimeout(()=>j(!0),1e3);return()=>clearTimeout(e)},[]),t.useEffect(()=>{a&&setTimeout(()=>x.current.focus(),0)},[a,h]),t.useEffect(()=>{function e(o){u.current&&!u.current.contains(o.target)&&m(!1)}return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]),t.useEffect(()=>{r||g(-1)},[r,g]),t.useEffect(()=>{function e(o){n&&a&&o.key==="Enter"&&d(n,r.token)}return document.addEventListener("keypress",e),()=>document.removeEventListener("keypress",e)},[a,r.token,n,d]),s.jsxs(w,{$loaded:S,children:[s.jsx(M,{text:"people profile"}),!f&&s.jsxs(z,{ref:u,children:[s.jsx(A,{onClick:()=>m(!0),children:s.jsx(k,{icon:C,color:"gold",style:{fontSize:"20px",zIndex:3}})}),s.jsx(P,{id:"search",name:"search",type:"text","araia-label":"find a person",ref:x,$active:a,value:n,onChange:e=>h(e.target.value)}),s.jsx(_,{$active:a,disabled:(n==null?void 0:n.length)<1,onClick:()=>{n&&d(n,r.token)},children:s.jsx(k,{icon:T,color:"gold",style:{fontSize:"20px"}})})]}),(i==null?void 0:i.length)>0&&s.jsx(N,{children:i}),!f&&(c==null?void 0:c.length)>0&&s.jsx(B,{children:c.map(e=>s.jsxs(F,{to:`/detailed-person/${e.id}`,children:[e.name," ",e.known_for_department?`(${e.known_for_department})`:null]},e.id))}),s.jsx(b,{})]})}export{q as default};
